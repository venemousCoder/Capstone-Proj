<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/public/styles/styles.css" />
    <title>Document</title>
  </head>
  <body>
    <%- include('./partials/nav.ejs') %>
    <h2>Users Table</h2>
    <table class="table">
      <thead>
        <tr class="trow">
          <th>User Name</th>
          <th>Email</th>
          <th>Subscribed</th>
          <th>Courses Registered</th>
        </tr>
      </thead>
      <tbody class="tbody">
          <% i=0 %>
          <% users.forEach(user => { %>
            <tr class="trow">
          <td><a href=<%= `/user/${user._id}` %>><%= user.userName %></a></td>
          <td><%= user.email %></td>
          <td> <pre><%= user.subscribed %></pre></td>
          <% if(user.spiceCourse[0]== undefined) { %>
            <td><%= 'no course' %></td>
            <% }else{ %>
              <%user.spiceCourse.forEach((spice)=>{ %><td> <%= spice.spiceName %> </td><% }) %>
              <% } %>
            </tr>
            <tr><td><a href=<%= `/update/${user._id}`%>> Edit </a></td></tr>
            <tr>
              <td>
                <a onclick="return confirm(`Are you sure you want to delete this user`)" href=<%= `/subs/delete/${user._id}?_method=delete`%>> Delete </a>
              </td>
            </tr>
            <% i+=1}); %>
        </tbody>
    </table>
  </body>
</html>
